// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/ui/launchpad/VizInstance","sap/ushell/ui/launchpad/VizInstanceAbap","sap/ushell/ui/launchpad/VizInstanceCdm","sap/ushell/ui/launchpad/VizInstanceLaunchPage","sap/ushell/ui/launchpad/VizInstanceLink","sap/m/library","sap/ushell/library","sap/base/util/ObjectPath","sap/ushell/EventHub","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations"],function(e,t,a,i,n,o,r,d,s,l){"use strict";var c=o.LoadState;var u=r.DisplayFormat;function p(){}p.prototype.instantiateVisualization=function(o){var r;var p=d.get("_instantiationData.platform",o);var f={vizRefId:o.id,title:o.title,subtitle:o.subtitle,icon:o.icon,keywords:o.keywords,instantiationData:o._instantiationData,indicatorDataSource:o.indicatorDataSource,dataSource:o.dataSource,contentProviderId:o.contentProviderId,contentProviderLabel:o.contentProviderLabel,vizConfig:o.vizConfig,supportedDisplayFormats:o.supportedDisplayFormats,displayFormat:o.displayFormatHint,numberUnit:o.numberUnit,dataHelpId:o.vizId,preview:o.preview};if(f.indicatorDataSource){f.indicatorDataSource.ui5object=true}if((p==="ABAP"||p==="CDM")&&f.displayFormat===u.Compact){this._cleanInstantiationDataForLink(f);p="LINK"}if(p==="ABAP"){r=new t(f)}else if(p==="CDM"){r=new a(f)}else if(p==="LINK"){r=new n(f)}if(p==="LAUNCHPAGE"){r=new i(f)}if(!r){return new e({state:c.Failed})}r.setTargetURL(o.targetURL);if(p!=="LINK"){r.setInfo(o.info)}if(l.isStandardVizType(o.vizType)){try{r.load().then(function(){s.emit("VizInstanceLoaded",o.id)})}catch(e){r.setState(c.Failed);s.emit("VizInstanceLoaded",o.id)}}else{r.setState(c.Loading);s.once("CoreResourcesComplementLoaded").do(function(){try{r.load(true).then(function(){r.setState(c.Loaded)})}catch(e){r.setState(c.Failed)}})}return r};p.prototype._cleanInstantiationDataForLink=function(e){delete e.info;delete e.icon;delete e.keywords;delete e.instantiationData;delete e.dataSource;delete e.contentProviderId;delete e.contentProviderLabel;delete e.vizConfig;delete e.numberUnit;delete e.indicatorDataSource;delete e.preview};p.hasNoAdapter=true;return p});
//# sourceMappingURL=VisualizationInstantiation.js.map