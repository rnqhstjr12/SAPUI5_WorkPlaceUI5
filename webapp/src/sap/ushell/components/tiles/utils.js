// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/i18n/Localization","sap/ui/core/Element","sap/ui/core/Locale","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/resources","sap/ui/thirdparty/datajs","sap/ui/core/mvc/View","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/m/library","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/IconPool","sap/ui/core/Icon","sap/m/SelectDialog","sap/m/StandardListItem","sap/m/Text","sap/m/TableSelectDialog","sap/m/Column","sap/m/ColumnListItem","sap/ui/core/CustomData","sap/ui/core/Item","sap/m/Label","sap/ui/model/Sorter","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/format/NumberFormat"],function(e,t,a,i,n,r,s,l,o,u,p,c,g,d,_,f,b,y,I,v,m,V,w,h,jQuery,S,x){"use strict";var T=o.MessageType;var P=o.ValueState;var D=o.mvc.ViewType;var C=u.ButtonType;var R={};R.isInitial=function(e){return e==="App Launcher – Static"||e==="App Launcher – Dynamic"||e==="Target Mapping"};R.getResourceBundleModel=function(){return n.i18nModel};R.getEmptyRowObj=function(e){return{name:"",mandatory:false,value:"",isRegularExpression:false,defaultValue:"",valEnabled:false||!e,defValEnabled:true,editable:e}};R.getEmptyTileActionsRowObj=function(e){var t=R.getResourceBundleModel().getResourceBundle();return{menu_title:"",target_type:t.getText("configuration.tile_actions.table.target_type.url"),navigation_target:"",action:"",icon:"",isTargetTypeIntent:false,editable:e}};R.getTileNavigationActionsRows=function(e,t){var a=[],i=[];i=this.getTileNavigationActions(e);if(i.length){for(var n=0;n<i.length;n++){a.push(A(i[n],t))}}else{a=[this.getEmptyTileActionsRowObj(t)]}return a};R.getTileNavigationActions=function(e){var t=[],a="";var i=e.bag.getBag("tileNavigationActions");if(i.getPropertyNames().indexOf("tile_navigation_actions")>=0){t=JSON.parse(i.getProperty("tile_navigation_actions"));for(var n=0;n<t.length;n++){if(t[n].text){if(i.getTextNames().indexOf("action_tile_"+(n+1))>=0){a=i.getText("action_tile_"+(n+1))}t[n].text=a}}}return t};var A=function(e,t){var a={},i=R.getResourceBundleModel().getResourceBundle();a.menu_title=e.text;a.icon=e.icon;if(e.targetURL.charAt(0)==="#"){a.target_type=i.getText("configuration.tile_actions.table.target_type.intent");var n=e.targetURL.split("-");a.navigation_target=n[0].substring(1,n[0].length);a.action=n[1];a.isTargetTypeIntent=true}else{a.target_type=i.getText("configuration.tile_actions.table.target_type.url");a.navigation_target=e.targetURL;a.action="";a.isTargetTypeIntent=false}a.editable=t;return a};R.tileActionsRows2TileActionsArray=function(e){var t=[];for(var a=0;a<e.length;a++){if(e[a].menu_title){t.push(E(e[a]))}}return t};var E=function(e){var t={};t.text=e.menu_title;t.icon=e.icon;if(e.action){t.targetURL="#"+e.navigation_target+"-"+e.action}else{t.targetURL=e.navigation_target}return t};R.populateTileNavigationActionsBag=function(e,t){e.setProperty("tile_navigation_actions",JSON.stringify(t));for(var a=0;a<t.length;a++){var i=t[a].text;e.setText("action_tile_"+(a+1),i)}};R.getDefaultFormFactors=function(){return{appDefault:false,manual:{desktop:true,tablet:true,phone:true},defaultParam:true}};R.buildFormFactorsObject=function(e){return{appDefault:e.getProperty("/config/appFormFactor"),manual:{desktop:e.getProperty("/config/desktopChecked"),tablet:e.getProperty("/config/tabletChecked"),phone:e.getProperty("/config/phoneChecked")}}};R.tableHasDuplicateParameterNames=function(e){var t={};for(var a=0;a<e.length;a++){var i=e[a].name;if(i!==""){if(t[i]){return true}t[i]=true}}return false};R.tableHasInvalidSapPrelaunchOperationValue=function(e){for(var t=0;t<e.length;t++){if(e[t].name==="sap-prelaunch-operations"){if(i.parseAndValidateOperations(e[t].defaultValue)===null){return false}break}}return true};R.getMappingSignatureString=function(e,t){var a="";for(var i=0;i<e.length;i++){if(e[i].name){a+=M(e[i])+"&"}}return t?a+"*=*":a.substring(0,a.length-1)};var M=function(e){var t="";if(e.mandatory){if(e.isRegularExpression){t="{"+e.name+"="+encodeURIComponent(e.value)+"}"}else{t=e.name+"="+encodeURIComponent(e.value)}}else{t="["+e.name+"="+encodeURIComponent(e.defaultValue)+"]"}return t};R.getMappingSignatureTableData=function(e,t){var a=[];var i=e.split("&");for(var n=0;n<i.length;n++){var r=i[n];if(r!=="*=*"){a.push(k(i[n],t))}}return a};var k=function(e,t){var a={};if(e.charAt(0)==="["){a.mandatory=false;a.isRegularExpression=false;a.value="";e=e.substring(1,e.length-1);a.name=e.substring(0,e.indexOf("="));a.defaultValue=decodeURIComponent(e.substring(e.indexOf("=")+1))}else{a.mandatory=true;a.defaultValue="";if(e.charAt(0)==="{"){a.isRegularExpression=true;e=e.substring(1,e.length-1)}else{a.isRegularExpression=false}a.name=e.substring(0,e.indexOf("="));a.value=decodeURIComponent(e.substring(e.indexOf("=")+1))}a.editable=t;if(t){a.valEnabled=a.mandatory;a.defValEnabled=!a.mandatory}else{a.valEnabled=true;a.defValEnabled=true}return a};R.getAllowUnknownParametersValue=function(e){if(e&&e.substring(e.length-3,e.length)==="*=*"){return true}return false};R.getMappingSignature=function(e,t){var a=t?"allowed":"ignored";var i=new RegExp("%%UserDefault[.].+%%");var n=[];var r={parameters:{},additional_parameters:a};e.forEach(function(e){r.parameters[e.name]={required:e.mandatory,rename_to:e.rename_to};if(e.defaultValue){n=i.exec(e.defaultValue);if(n){e.defaultValue=n[0]}r.parameters[e.name].defaultValue={value:e.defaultValue}}if(e.value){n=i.exec(e.value);if(n){e.value=n[0]}r.parameters[e.name].filter={value:e.value};if(e.isRegularExpression){r.parameters[e.name].filter.format="regexp"}}});return r};R.getSignatureTableData=function(e,t){var a=[];var i={};var n={};var r=e.parameters;for(var s in r){n=r[s];i={};i.editable=t;i.name=s;i.mandatory=n.required;if(n.rename_to){i.rename_to=n.rename_to}else{i.rename_to=n.renameTo}if(t){i.valEnabled=i.mandatory;i.defValEnabled=!i.mandatory}else{i.valEnabled=true;i.defValEnabled=true}if(n.filter){i.value=n.filter.value;if(n.filter.format&&n.filter.format==="regexp"){i.isRegularExpression=true}}if(n.defaultValue){i.defaultValue=n.defaultValue.value}a.push(i)}return a};R.getTranslatedTitle=function(e){if(e.bag){var t=e.bag.getBag("tileProperties");if(t.getTextNames().indexOf("display_title_text")>=0){return t.getText("display_title_text")}}if(e.title){return e.title.getTitle()}if(e.preview){return e.preview.getTitle()}return""};R.getTranslatedSubtitle=function(e,t){if(e.bag){var a=e.bag.getBag("tileProperties");if(a.getTextNames().indexOf("display_subtitle_text")>=0){return a.getText("display_subtitle_text")}}if(typeof t.display_subtitle_text==="string"){return t.display_subtitle_text}if(e.preview&&e.preview.getDescription&&e.preview.getDescription()){return e.preview.getDescription()}return""};R.getTranslatedProperty=function(e,t,a){if(e.bag){var i=e.bag.getBag("tileProperties");if(i.getTextNames().indexOf(a)>=0){return i.getText(a)}}return t[a]};R.getActionConfiguration=function(e,t){var a=e.configuration.getParameterValueAsString("tileConfiguration");var i=JSON.parse(a||"{}"),n;if(typeof t==="undefined"){t=e.configurationUi.isEnabled()}if(t){n=R.getResourceBundleModel().getResourceBundle()}i.semantic_object=i.semantic_object||(t?"["+n.getText("configuration.semantic_object")+"]":"");i.semantic_action=i.semantic_action||(t?"["+n.getText("configuration.semantic_action")+"]":"");i.navigation_provider=i.navigation_provider||"";i.navigation_provider_role=i.navigation_provider_role||"";i.navigation_provider_instance=i.navigation_provider_instance||"";i.target_application_id=i.target_application_id||"";i.target_application_alias=i.target_application_alias||"";i.display_info_text=i.display_info_text||"";i.editable=true;if(e.configurationUi&&e.configurationUi.isReadOnly){if(e.configurationUi.isReadOnly()){i.editable=false}}return i};R.getViewConfiguration=function(e){var t=e.getViewData();var a=t.chip;var i=R.getAppLauncherConfig(a,true,true);return i};R.getConfigurationUi=function(e,t){var a,i,n,r,o;var u=e.getViewData();var p=R.getViewConfiguration(e);var c=new l({config:p,tileModel:e.getModel()});return s.create({type:D.XML,viewData:u,viewName:t}).then(function(t){t.setModel(c);a=t.byId("navigation_semantic_objectInput")||t.byId("semantic_objectInput");if(a){a.getModel().setProperty("/enabled",p.navigation_use_semantic_object);a.getModel().setProperty("/value",p.semantic_object||p.navigation_semantic_object)}i=t.byId("navigation_provider_roleInput");if(i){i.getModel().setProperty("/value",p.navigation_provider_role)}n=t.byId("navigation_provider_instanceInput");if(n){n.getModel().setProperty("/value",p.navigation_provider_instance)}r=t.byId("target_application_aliasInput");if(r){r.getModel().setProperty("/value",p.target_application_alias)}o=t.byId("targetTypeInput");if(o){if(!t.getModel().getProperty("/config/transaction")){t.getModel().setProperty("/config/transaction",{})}if(!t.getModel().getProperty("/config/web_dynpro")){t.getModel().setProperty("/config/web_dynpro",{})}if(e.getModel().getProperty("/config/navigation_provider")==="LPD"){R.displayLpdCustApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WCF"){o.setSelectedKey("WCF");R.displayWCFApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="SAPUI5"||e.getModel().getProperty("/config/navigation_provider")===""){o.setSelectedKey("SAPUI5");R.displaySapui5ApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="TR"){R.displayTransactionApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="WDA"){R.displayWebDynproApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URL"){R.displayURLApplicationTypeFields(t)}else if(e.getModel().getProperty("/config/navigation_provider")==="URLT"){R.displayURLTApplicationTypeFields(t);c.setProperty("/config/editable",false);c.setProperty("/config/manualFormFactor",false)}}return t})};R._updateTilePropertiesTexts=function(e,t){var a=t.getTextNames(),i=e.getModel();a.forEach(function(e){i.setProperty("/data/"+e,t.getText(e));i.setProperty("/config/"+e,t.getText(e))})};R._updateTileConfiguration=function(e,t){var a=e.getModel(),i=JSON.parse(t),n;Object.keys(i).forEach(function(e){n=i[e];a.setProperty("/data/"+e,n);a.setProperty("/config/"+e,n);if(e==="navigation_target_url"){a.setProperty("/nav/"+e,n)}})};R.aData=[];R.aActionData=[];R.aRoleData=[];R.aAliasData=[];R.objectSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("name",c.Contains,a);r=new p("obj",c.Contains,a);t.push(r);t.push(n);i.filter(new p(t,false))}};R.actionSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("text",c.Contains,a);t.push(n);i.filter(new p(t,false))}};R.roleSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r;if(a!==undefined){i=e.getParameter("itemsBinding");n=new p("role",c.Contains,a);r=new p("instance",c.Contains,a);t.push(n);t.push(r);i.filter(new p(t,false))}};R.instanceSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");if(a!==""){l=new p("instance",c.Contains,a);t.push(l)}if(n!==""){s=new p("role",c.EQ,n);t.push(s)}if(t.length>0){r.filter(new p(t,true))}}};R.instanceSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_roleInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("instance",c.Contains,n);i.push(u)}if(s!==""){o=new p("role",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSuggest=function(e,t){var a=e.getView(),i=[],n=t.getParameter("value"),r,s,l,o,u;r=a.byId("navigation_provider_instanceInput");s=r.getValue();n=t.getParameter("suggestValue");if(n!==""){u=new p("alias",c.Contains,n);i.push(u)}if(s!==""){o=new p("instance",c.EQ,s);i.push(o)}if(i.length>0){l=t.oSource.getBinding("suggestionItems");l.filter(new p(i,true))}};R.aliasSelectDoSearch=function(e){var t=[],a=e.getParameter("value"),i,n,r,s,l;i=e.getSource().getCustomData();n=i[0].getValue();if(a!==undefined){r=e.getParameter("itemsBinding");s=new p("instance",c.EQ,n);if(a!==""){l=new p("alias",c.Contains,a);t.push(l)}t.push(s);r.filter(new p(t,true))}};R.objectSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("name",c.Contains,t);a.push(n);i.filter(a)}};R.actionSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("text",c.Contains,t);a.push(n);i.filter(a)}};R.roleSelectUpdateDialog=function(e,t){var a=[],i=e.getBinding("items"),n;if(t!==undefined){n=new p("role",c.Contains,t);a.push(n);i.filter(a)}};R.instanceSelectUpdateDialog=function(e,t){var a=[],i,n=e.getBinding("items"),r,s,l;i=e.getCustomData();s=i[0].getValue();if(t!==undefined){r=new p("instance",c.Contains,t);a.push(r)}if(s!==""){l=new p("role",c.EQ,s);a.push(l)}if(a.length>0){n.filter(a,true)}};R.aliasSelectUpdateDialog=function(e,t){var a=[],i,n,r=e.getBinding("items"),s,l;i=e.getCustomData();n=i[0].getValue();if(t!==undefined){l=new p("alias",c.Contains,t);a.push(l)}if(n!==""){s=new p("instance",c.EQ,n);a.push(s)}if(a.length>0){r.filter(a,true)}};R.sSelectedColor=(jQuery(".sapMStdTileIconDiv").css("color")||"#007cc0").split(" ").join("");R.sDeselectedColor=(jQuery(".sapMLabel:not(.sapFioriDropZoneText )").css("color")||"#666666").split(" ").join("");R.iconSelect=function(e,t){e.setColor(t?R.sSelectedColor:R.sDeselectedColor);e.setActiveColor(t?R.sDeselectedColor:R.sSelectedColor)};R.onSelectIcon=function(e,t,a,i){var n=e.getView().getModel(),r;if(t){r=n.getProperty("/config/tile_actions_selected_icon")}else{r=n.getProperty("/config/selected_icon")}if(r){R.iconSelect(r,false)}r=i.getSource();R.iconSelect(r,true);n.setProperty("/config/ok.enabled",true);if(t){n.setProperty("/config/tile_actions_selected_icon",r)}else{n.setProperty("/config/selected_icon",r)}e.byId("selectIconDialog").setTitle(r.getSrc())};R.onSelectIconClose=function(e){e.byId("selectIconDialog").close()};R.onSelectIconOk=function(e,t){var a=e.getModel().getProperty("/config/selected_icon");if(!t){e.getModel().setProperty("/config/display_icon_url",a.getSrc());e.byId("iconInput").setValueState(P.None)}else{a=e.getModel().getProperty("/config/tile_actions_selected_icon");if(a){t.setValue(a.getSrc());t.setValueState(P.None)}}R.onSelectIconClose(e)};R.iconSelectOnValueHelpRequest=function(e,a,i){var n=e.getView().getModel();var r=e.getView().byId("icons");var s=g.getIconCollectionNames();var l=e.getView().byId("selectIconDialog");var o=e.getView().byId("ok");var u,p,c,_,f,b,y,I=false;r.destroyContent();if(i){c=t.getElementById(a.getParameter("id"));p=c.getValue()}else{p=n.getProperty("/config/display_icon_url")}o.attachEventOnce("press",function(){R.onSelectIconOk(e.getView(),c)});s.sort();s=s.filter(function(e){if(e==="BusinessSuiteInAppSymbols"){I=true;return false}return true});if(I){s.push("BusinessSuiteInAppSymbols")}for(f=0;f<s.length;f+=1){_=g.getIconNames(s[f]);_.sort();for(b=0;b<_.length;b+=1){y=g.getIconURI(_[b],s[f]);r.addContent(new d({height:"38px",press:R.onSelectIcon.bind(null,e,i,c),size:"2rem",src:y,tooltip:y,width:"38px"}))}}u=r.getContent();n.setProperty("/config/ok.enabled",false);l.bindProperty("title",{model:"i18n",path:"configuration.select_icon"});for(f=0;f<u.length;f+=1){if(u[f].getSrc()===p){if(i){n.setProperty("/config/tile_actions_selected_icon",u[f])}else{n.setProperty("/config/selected_icon",u[f])}R.iconSelect(u[f],true);n.setProperty("/config/ok.enabled",true);l.setTitle(p)}else{R.iconSelect(u[f],false)}}l.open()};R.objectSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_object");var s;var o;var u=new l;var p=new _("semantic_object_select_dialog",{title:r,search:R.objectSelectDoSearch,liveChange:R.objectSelectDoSearch}),c=new f({title:"{obj}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_objectInput")||n.byId("navigation_semantic_objectInput")}o=s.getValue();p.open(o);u.setData(e.aDefaultObjects.concat(R.aData));p.bindAggregation("items","/",c);p.setModel(u);R.objectSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange()}}p.destroy();p=null})};R.actionSelectOnValueHelpRequest=function(e,a,i){var n=e.getView();var r=R.getResourceBundleModel().getResourceBundle().getText("configuration.semantic_action");var s;var o;var u=new l;var p=new _("semantic_action_select_dialog",{title:r,search:R.actionSelectDoSearch,liveChange:R.actionSelectDoSearch}),c=new f({title:"{text}"});if(i){s=t.getElementById(a.getParameter("id"))}else{s=n.byId("semantic_actionInput")||n.byId("navigation_semantic_actionInput")}o=s.getValue();p.open(o);u.setData(R.aActionData);p.bindAggregation("items","/items",c);p.setModel(u);R.actionSelectUpdateDialog(p,o);p.attachCancel(function(e){s.setValue(o);if(!i){s.fireChange()}p.destroy();p=null});p.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){s.setValue(t.getTitle());if(!i){s.fireChange();s.fireLiveChange({newValue:t.getTitle()})}}p.destroy();p=null})};R.roleSelectOnValueHelpRequest=function(e){var t=e.getView(),a=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role"),i,n,r,s=new l,o=new y("role_select_dialog",{title:a,search:R.roleSelectDoSearch,liveChange:R.roleSelectDoSearch,columns:[new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_role")})]}),new I({header:[new b({text:R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance")})]})]}),u=new v({cells:[new b({text:"{role}"}),new b({text:"{instance}"})]});i=t.byId("navigation_provider_roleInput");n=t.byId("navigation_provider_instanceInput");r=i.getValue();o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.roleSelectUpdateDialog(o,r);o.attachCancel(function(e){i.setValue(r);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getCells()[0].getText());n.setValue(t.getCells()[1].getText());i.fireChange();n.fireChange()}o.destroy();o=null})};R.instanceSelectOnValueHelpRequest=function(e){var t=e.getView();var a;var i=R.getResourceBundleModel().getResourceBundle().getText("configuration.navigation_provider_instance");var n;var r;var s=new l;var o=new _("instance_select_dialog",{title:i,search:R.instanceSelectDoSearch,liveChange:R.instanceSelectDoSearch}),u=new f({title:"{instance}"});n=t.byId("navigation_provider_instanceInput");r=n.getValue();a=t.byId("navigation_provider_roleInput").getValue();o.addCustomData(new m({key:"role",value:a}));o.open(r);s.setData(e.aDefaultObjects.concat(R.aRoleData));o.bindAggregation("items","/",u);o.setModel(s);R.instanceSelectUpdateDialog(o,r);o.attachCancel(function(e){n.setValue(r);n.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){n.setValue(t.getTitle());n.fireChange()}o.destroy();o=null})};R.applicationAliasSelectOnValueHelpRequest=function(e){var t=e.getView();var a=R.getResourceBundleModel().getResourceBundle().getText("configuration.target_application_alias");var i;var n;var r;var s=new l;var o=new _("alias_select_dialog",{title:a,search:R.aliasSelectDoSearch,liveChange:R.aliasSelectDoSearch}),u=new f({title:"{alias}"});i=t.byId("target_application_aliasInput");n=i.getValue();r=t.byId("navigation_provider_instanceInput").getValue();o.addCustomData(new m({key:"instance",value:r}));o.open(n);s.setData(e.aDefaultObjects.concat(R.aAliasData));o.bindAggregation("items","/",u);o.setModel(s);R.aliasSelectUpdateDialog(o,n);o.attachCancel(function(e){i.setValue(n);i.fireChange();o.destroy();o=null});o.attachConfirm(function(e){var t=e.getParameter("selectedItem");if(t){i.setValue(t.getTitle());i.fireChange()}o.destroy();o=null})};R.onTargetTypeChange=function(e){var a=e.getParameter("id");var i=t.getElementById(a).getParent().getCells();var n=e.getSource().getSelectedKey();if(n==="INT"){i[3].setEnabled(true);i[2].setShowValueHelp(true);i[2].setValue("")}else{i[2].setShowValueHelp(false);i[2].setValue("");i[3].setEnabled(false);i[3].setValue("")}};R.addTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=this.getEmptyTileActionsRowObj();a.push(i);t.setProperty("/config/tile_actions_rows",a)};R.deleteTileActionsRow=function(e){var t=e.getModel();var a=t.getProperty("/config/tile_actions_rows");var i=e.byId("tileActions");var n=i.getSelectedIndices();var r=n.sort(function(e,t){return t-e}).slice();for(var s=0;s<r.length;s++){i.removeSelectionInterval(r[s],r[s]);a.splice(r[s],1)}t.setProperty("/config/tile_actions_rows",a)};R.checkInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("iconInput"),n=e.byId("useLpdCheckbox"),r=e.byId("navigation_semantic_objectInput")||e.byId("semantic_objectInput"),s=e.byId("navigation_semantic_actionInput")||e.byId("semantic_actionInput"),l=P.None,o=null,u=String(t.getParameter("newValue")||"").trim();switch(t.getSource()){case i:if(u!==""&&u.substring(0,11)!=="sap-icon://"){l=P.Error;o=a.getText("configuration.display_icon_url.warning")}break;case n:if(!n.getSelected()){s.setValueState(P.None);r.setValueState(P.None)}break;case r:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_object.error_invalid_chars")}else if(u===""){l=P.Error}break;case s:if(/[-#&? ]/.test(u)){l=P.Error;o=a.getText("configuration.semantic_action.error_invalid_chars")}else if(u===""){l=P.Error}break;default:break}if(l){t.getSource().setValueState(l);if(o!==null){t.getSource().setValueStateText(o||"")}}};R.checkInputOnSaveConfig=function(e){var t=e.byId("iconInput");var a=e.byId("navigation_semantic_objectInput");var i=e.byId("navigation_semantic_actionInput");var n=e.byId("useLpdCheckbox");var r=R.getResourceBundleModel().getResourceBundle();var s=false;if(t.getValue()!==""&&!R.isIconURIValid(t.getValue())){t.setValueState(P.Error);t.setValueStateText(r.getText("configuration.display_icon_url.warning"));s=true}if(n.getSelected()&&/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(r.getText("configuration.semantic_object.error_invalid_chars"));s=true}else if(n.getSelected()&&a.getValue()===""){a.setValueState(P.Error);s=true}if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(r.getText("configuration.semantic_action.error_invalid_chars"));s=true}else if(n.getSelected()&&i.getValue()===""){i.setValueState(P.Error);s=true}return s};R.checkTileActions=function(e){var t=e.getModel().getProperty("/config/tile_actions_rows");var a=R.getResourceBundleModel().getResourceBundle();var i=false;for(var n=0;n<t.length;n++){if(!t[n].menu_title&&(t[n].navigation_target||t.length>1)){t[n].valueState=P.Error;i=true}else{t[n].valueState=P.None}if(t[n].icon){if(!R.isIconURIValid(t[n].icon)){t[n].iconValueState=P.Error;t[n].iconValueStateText=a.getText("configuration.display_icon_url.warning");i=true}}}e.getModel().setProperty("/config/tile_actions_rows",t);return i};R.isIconURIValid=function(e){var t=[];var a="";var i="";var n="";t=/sap-icon:\/\/(.+)\//.exec(e);if(t){a=t[1];t=/\/\/.+\/(.+)/.exec(e);if(t){i=t[1]}else{i=""}n=g.getIconURI(i,a);if(n!==e){return false}}else{t=/sap-icon:\/\/(.+)/.exec(e);if(t){i=t[1];if(!g.getIconInfo(i)){return false}}else{return false}}return true};R.checkTMInput=function(e,t){var a=R.getResourceBundleModel().getResourceBundle(),i=e.byId("semantic_objectInput"),n=e.byId("semantic_actionInput"),r=e.byId("target_application_descriptionInput"),s=e.byId("target_application_urlInput"),l=e.byId("target_application_componentInput"),o=e.byId("navigation_provider_roleInput"),u=e.byId("navigation_provider_instanceInput"),p=e.byId("target_application_aliasInput"),c=e.byId("target_application_idInput"),g=String(t.getParameter("newValue")||"").trim(),d=P.None,_=null;switch(t.getSource()){case i:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_object.error_invalid_chars")}if(n.getValue()===""){n.setValueState(P.Error)}break;case n:if(/[-#&? ]/.test(g)){d=P.Error;_=a.getText("configuration.semantic_action.error_invalid_chars")}else if(g===""){d=P.Error}break;case r:if(g===""){d=P.Error}break;case s:if(g!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.url.error_invalid_chars")}break;case l:if(g===""){d=P.Error}else if(g.substring(0,17)==="SAPUI5.Component="){d=P.Error;_=a.getText("configuration.target_application.component.error_invalid_input")}break;case o:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.role.error_invalid_chars")}break;case u:if(g===""){d=P.Error}else if(!/^[\w/]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.instance.error_invalid_chars")}break;case p:if(g===""&&c.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&c.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");c.setValueState(d);c.setValueStateText(_)}else{c.setValueState(P.None)}break;case c:if(g===""&&p.getValue()===""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning")}else if(g!==""&&p.getValue()!==""){d=P.Error;_=a.getText("configuration.target_application.alias_id.warning");p.setValueState(d);p.setValueStateText(_)}else if(g!==""&&!/^[A-Fa-f0-9]+$/.test(g)){d=P.Error;_=a.getText("configuration.target_application.alias_id.error_invalid_chars")}else{p.setValueState(P.None)}break;default:break}if(d){t.getSource().setValueState(d);if(_!==null){t.getSource().setValueStateText(_||"")}}};R.checkTMInputOnSaveConfig=function(e){var t=R.getResourceBundleModel().getResourceBundle();var a=e.byId("semantic_objectInput");var i=e.byId("semantic_actionInput");var n=e.byId("target_application_descriptionInput");var r=e.byId("target_application_urlInput");var s=e.byId("target_application_componentInput");var l=e.byId("navigation_provider_roleInput");var o=e.byId("navigation_provider_instanceInput");var u=e.byId("target_application_aliasInput");var p=e.byId("target_application_idInput");var c=e.byId("targetTypeInput");var g=e.byId("target_transactionInput");var d=e.byId("target_web_dynpro_applicationInput");var _=e.byId("target_wcf_application_idInput");var f=e.byId("desktopCB");var b=e.byId("tabletCB");var y=e.byId("phoneCB");var I=false;a.setValue(a.getValue().trim());if(/[-#&? ]/.test(a.getValue())){a.setValueState(P.Error);a.setValueStateText(t.getText("configuration.semantic_object.error_invalid_chars"));I=true}i.setValue(i.getValue().trim());if(/[-#&? ]/.test(i.getValue())){i.setValueState(P.Error);i.setValueStateText(t.getText("configuration.semantic_action.error_invalid_chars"));I=true}else if(i.getValue()===""){i.setValueState(P.Error);I=true}var v=e.getModel().getProperty("/config/navigation_provider"),m;if(v==="SAPUI5"){if(n.getValue()===""){n.setValueState(P.Error);I=true}if(r.getValue()!==""&&!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}if(s.getValue()===""){s.setValueState(P.Error);I=true}else if(s.getValue().substring(0,17)==="SAPUI5.Component="){s.setValueState(P.Error);s.setValueStateText(t.getText("configuration.target_application.component.error_invalid_input"));I=true}}else if(v==="LPD"){if(l.getValue()===""){l.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(l.getValue())){l.setValueState(P.Error);m=t.getText("configuration.target_application.role.error_invalid_chars");l.setValueStateText(m);I=true}if(o.getValue()===""){o.setValueState(P.Error);I=true}if(!/^[\w]+$/.test(o.getValue())){o.setValueState(P.Error);m=t.getText("configuration.target_application.instance.error_invalid_chars");o.setValueStateText(m);I=true}if(u.getValue()===""&&p.getValue()===""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(u.getValue()!==""&&p.getValue()!==""){m=t.getText("configuration.target_application.alias_id.warning");u.setValueState(P.Error);u.setValueStateText(m);p.setValueState(P.Error);p.setValueStateText(m);I=true}if(p.getValue()!==""&&!/^[A-Fa-f0-9]+$/.test(p.getValue())){p.setValueState(P.Error);p.setValueStateText(t.getText("configuration.target_application.alias_id.error_invalid_chars"));I=true}}else if(v==="TR"){if(g.getValue()===""){g.setValueState(P.Error);I=true}}else if(v==="WDA"){if(d.getValue()===""){d.setValueState(P.Error);I=true}}else if(v==="WCF"){if(_.getValue()===""){_.setValueState(P.Error);I=true}}else if(v==="URL"){if(r.getValue()===""){r.setValueState(P.Error);I=true}else if(!/^[-~+,;:?%&#=/.\w]+$/.test(r.getValue())){r.setValueState(P.Error);r.setValueStateText(t.getText("configuration.target_application.url.error_invalid_chars"));I=true}}else{c.setValueState(P.Error);c.setValueStateText(t.getText("configuration.navigation_provider.error_invalid_provider"));I=true}if(!f.getSelected()&&!b.getSelected()&&!y.getSelected()){m=t.getText("configuration.form_factor.warning");f.setValueState(P.Error);f.setValueStateText(m);b.setValueState(P.Error);b.setValueStateText(m);y.setValueState(P.Error);y.setValueStateText(m);I=true}return I};R.updateTooltipForDisabledProperties=function(e){var t=e.getModel();var a=t.getProperty("/config/isLocaleSuitable");if(!a){var i=R.getResourceBundleModel().getResourceBundle();var n=i.getText("edit_configuration.original_locale_not_fit_tooltip",[t.getProperty("/config/userLocale"),t.getProperty("/config/orgLocale")]);e.byId("titleInput").setTooltip(n);e.byId("subtitleInput").setTooltip(n);e.byId("keywordsInput").setTooltip(n);e.byId("infoInput").setTooltip(n)}};R.updateMessageStripForOriginalLanguage=function(e){var t=e.getModel();if(t.getProperty("/config/isLocaleSuitable")===false){var a=R.getResourceBundleModel().getResourceBundle().getText("edit_configuration.original_locale_not_fit_message",[t.getProperty("/config/orgLocale").toUpperCase(),t.getProperty("/config/userLocale").toUpperCase()]);var i=e.byId("messageStrip");i.setVisible(true);i.setText(a);i.setType(T.Warning)}};R.createSemanticObjectModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/SemanticObjects",s=[{obj:"",name:""},{obj:"*",name:"*"}],o=(a||s).slice(0),u=new l;u.setSizeLimit(999999);u.setProperty("/value","");u.setProperty("/enabled",true);t.bindAggregation("suggestionItems","suggest>/items",new V({text:"{suggest>obj}"}));t.setModel(u,"suggest");if(R.aData.length>0){setTimeout(function(){u.setData({items:o.concat(R.aData)},true)},0);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].id;a=e.results[i].text;R.aData.push({obj:t,name:a||t})}u.setData({items:o.concat(R.aData)},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createRoleModel=function(e,t,a){var i=e.getView(),n="/sap/opu/odata/UI2/INTEROP/GetLPDInstances",s=new l,o=new l;s.setSizeLimit(999999);o.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);o.setProperty("/value","");o.setProperty("/enabled",true);var u=new v({cells:[new w({text:"{role}"}),new w({text:"{instance}"})]});t.bindAggregation("suggestionRows","/items",u);a.bindAggregation("suggestionItems","/items",new V({text:"{instance}"}));a.setModel(o);t.setModel(s);t.attachSuggestionItemSelected(function(e){a.setValue(e.getParameter("selectedRow").getCells()[1].getText());a.fireChange()});if(R.aRoleData.length>0){s.setData({items:R.aRoleData},false);o.setData({items:R.aRoleData},false);return}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i;for(i=0;i<e.results.length;i=i+1){t=e.results[i].lpdRole;a=e.results[i].instance;R.aRoleData.push({role:t,instance:a})}s.setData({items:R.aRoleData},true);o.setData({items:R.aRoleData},true)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,i.getViewName()||"sap.ushell.components.tiles.utils")})};R.createAliasModel=function(e,t){var a=e.getView(),i,n="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias",s=new l;s.setSizeLimit(999999);s.setProperty("/value","");s.setProperty("/enabled",true);t.bindAggregation("suggestionItems","/items",new V({text:"{alias}"}));t.setModel(s);i=R.getAppLauncherConfig(a.oViewData.chip,true,true);if(i&&i.navigation_provider_role&&i.navigation_provider_instance){if(i.navigation_provider_role!==""&&i.navigation_provider_instance!==""){n=n+"?role='"+i.navigation_provider_role+"'&instance='"+i.navigation_provider_instance+"'"}}r.read({requestUri:n,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(e){var t=e&&e.message?e.message:e;if(e.response){t+=" - "+e.response.statusCode+" "+e.response.statusText}S.error("Could not fetch data: "+n+": "+t,null,a.getViewName()||"sap.ushell.components.tiles.utils")})};R.updateAliasModel=function(e,t){var a,i,n,s=t.getModel();i=e.byId("navigation_provider_instanceInput").getValue();n=e.byId("navigation_provider_roleInput").getValue();a="/sap/opu/odata/UI2/INTEROP/GetLPDAppAlias?role='"+n+"'&instance='"+i+"'";r.read({requestUri:a,headers:{Accept:"application/json"}},function(e){var t,a,i,n,r;R.aAliasData=[];for(n=0;n<e.results.length;n=n+1){t=e.results[n].lpdApplicationAlias;a=e.results[n].lpdRole;i=e.results[n].lpdInstance;R.aAliasData.push({role:a,instance:i,alias:t})}r=s.getData();if(r){r.items=R.aAliasData}else{r={items:R.aAliasData}}s.setData(r,false)},function(t){var i=t&&t.message?t.message:t;if(t.response){i+=" - "+t.response.statusCode+" "+t.response.statusText}S.error("Could not fetch data: "+a+": "+i,null,e.getViewName()||"sap.ushell.components.tiles.utils")})};R.createActionModel=function(e,t){var a=new l;var i=e.getView(),n,r;a.setData({items:[{text:"display"},{text:"approve"},{text:"displayFactSheet"},{text:"manage"},{text:"create"},{text:"monitor"},{text:"track"},{text:"change"},{text:"register"},{text:"release"},{text:"analyzeKPIDetails"},{text:"lookup"},{text:"manageLineItems"}]});R.aActionData=a.getData();n=R.getAppLauncherConfig(i.oViewData.chip,true,true);r=n.navigation_semantic_action||n.semantic_action;if(r){if(!a.getData().items.some(function(e){return e.text===r})){a.getData().items.push({text:r})}}t.bindAggregation("suggestionItems","items>/items",new V({text:"{items>text}"}));t.setModel(a,"items");t.getBinding("suggestionItems").sort(new h("text",false))};R.createNavigationProviderModel=function(e,t){var a=new l;var i=R.getResourceBundleModel().getResourceBundle();var n=[{key:"SAPUI5",text:i.getText("configuration.target_application.sapui5")},{key:"LPD",text:i.getText("configuration.target_application.lpd_cust")},{key:"TR",text:i.getText("configuration.target_application.transaction")},{key:"WDA",text:i.getText("configuration.target_application.web_dynpro")},{key:"URL",text:i.getText("configuration.target_application.url")}];var r=R.getViewConfiguration(e.getView()).navigation_provider;if(r==="WCF"){n.push({key:"WCF",text:i.getText("configuration.target_application.wcf")})}else if(r==="URLT"){n.push({key:"URLT",text:i.getText("configuration.target_application.urlt")})}a.setData({items:n});t.bindItems("items>/items",new V({key:"{items>key}",text:"{items>text}"}));t.setModel(a,"items");t.getBinding("items").sort(new h("text",false))};R.displayApplicationTypeFields=function(e,t){switch(e){case"LPD":R.displayLpdCustApplicationTypeFields(t);break;case"SAPUI5":R.displaySapui5ApplicationTypeFields(t);break;case"TR":R.displayTransactionApplicationTypeFields(t);break;case"WDA":R.displayWebDynproApplicationTypeFields(t);break;case"URL":R.displayURLApplicationTypeFields(t);break;case"WCF":R.displayWCFApplicationTypeFields(t);break;case"URLT":R.displayURLTApplicationTypeFields(t);break}};R.displayWCFApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(true);e.byId("target_wcf_application_idInput").setVisible(true);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displaySapui5ApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(true);e.byId("target_application_componentInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayLpdCustApplicationTypeFields=function(e){e.byId("application_description").setVisible(false);e.byId("target_application_descriptionInput").setVisible(false);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(true);e.byId("navigation_provider_roleInput").setVisible(true);e.byId("navigation_provider_instance").setVisible(true);e.byId("navigation_provider_instanceInput").setVisible(true);e.byId("target_application_alias").setVisible(true);e.byId("target_application_aliasInput").setVisible(true);e.byId("target_application_id").setVisible(true);e.byId("target_application_idInput").setVisible(true);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(true)};R.displayTransactionApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(true);e.byId("target_transactionInput").setVisible(true);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayWebDynproApplicationTypeFields=function(e){e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(true);e.byId("target_web_dynpro_applicationInput").setVisible(true);e.byId("target_web_dynpro_configuration").setVisible(true);e.byId("target_web_dynpro_configurationInput").setVisible(true);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(true);e.byId("target_application_urlInput").setVisible(true);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(true);e.byId("target_system_aliasInput").setVisible(true);e.byId("urlt_application_component").setVisible(false);e.byId("urlt_application_componentInput").setVisible(false);e.byId("target_urlt_system_alias").setVisible(false);e.byId("target_urlt_system_aliasInput").setVisible(false);e.byId("application_type_deprecated").setVisible(false)};R.displayURLTApplicationTypeFields=function(e){e.byId("navigation_provider_role").setVisible(false);e.byId("navigation_provider_roleInput").setVisible(false);e.byId("navigation_provider_instance").setVisible(false);e.byId("navigation_provider_instanceInput").setVisible(false);e.byId("target_application_alias").setVisible(false);e.byId("target_application_aliasInput").setVisible(false);e.byId("target_application_id").setVisible(false);e.byId("target_application_idInput").setVisible(false);e.byId("application_description").setVisible(true);e.byId("target_application_descriptionInput").setVisible(true);e.byId("application_url").setVisible(false);e.byId("target_application_urlInput").setVisible(false);e.byId("application_component").setVisible(false);e.byId("target_application_componentInput").setVisible(false);e.byId("target_transaction").setVisible(false);e.byId("target_transactionInput").setVisible(false);e.byId("target_wcf_application_id").setVisible(false);e.byId("target_wcf_application_idInput").setVisible(false);e.byId("target_web_dynpro_application").setVisible(false);e.byId("target_web_dynpro_applicationInput").setVisible(false);e.byId("target_web_dynpro_configuration").setVisible(false);e.byId("target_web_dynpro_configurationInput").setVisible(false);e.byId("target_system_alias").setVisible(false);e.byId("target_system_aliasInput").setVisible(false);e.byId("urlt_application_component").setVisible(true);e.byId("urlt_application_componentInput").setVisible(true);e.byId("target_urlt_system_alias").setVisible(true);e.byId("target_urlt_system_aliasInput").setVisible(true);e.byId("application_type_deprecated").setVisible(false)};R.getAppLauncherConfig=function(t,i,n){var r;var s=t.configuration.getParameterValueAsString("tileConfiguration");var l;try{l=JSON.parse(s||"{}")}catch(e){S.error("Error while trying to parse tile configuration",e,"sap.ushell.components.tiles.utils");return{}}l.editable=true;if(t.configurationUi&&t.configurationUi.isReadOnly){if(t.configurationUi.isReadOnly()){l.editable=false}}var o=R.getTranslatedTitle(t);var u=R.getTranslatedSubtitle(t,l);var p=R.getTranslatedProperty(t,l,"display_info_text");var c=R.getTranslatedProperty(t,l,"display_search_keywords");if(i){r=R.getResourceBundleModel().getResourceBundle();if(n&&t.bag){var g=t.bag.getOriginalLanguage();var d=new a(e.getLanguageTag()).getSAPLogonLanguage();var _=e.getLanguage();l.isLocaleSuitable=g===""||g.toLowerCase()===d.toLowerCase()||g.toLowerCase()===_.toLowerCase();l.orgLocale=g;l.userLocale=d}}l.display_icon_url=l.display_icon_url||"";if(p!==undefined){l.display_info_text=p}else if(l.display_info_text===undefined){if(i&&!n){l.display_info_text="["+r.getText("configuration.display_info_text")+"]"}else{l.display_info_text=""}}l.navigation_semantic_object=l.navigation_semantic_object||"";l.navigation_semantic_action=l.navigation_semantic_action||"";l.navigation_semantic_parameters=l.navigation_semantic_parameters||"";l.display_number_unit=l.display_number_unit||"";l.display_number_factor=l.display_number_factor||"";l.service_refresh_interval=l.service_refresh_interval?parseInt(l.service_refresh_interval,10):0;l.service_url=l.service_url||"";l.navigation_target_url=l.navigation_target_url||"";if(i&&R.isInitial(o)){l.display_title_text=n?"":"["+r.getText("configuration.display_title_text")+"]";l.display_subtitle_text=n?"":"["+r.getText("configuration.display_subtitle_text")+"]"}else{l.display_title_text=o||l.display_title_text||"";if(u!==undefined){l.display_subtitle_text=u}else if(l.display_subtitle_text===undefined){l.display_subtitle_text=""}}l.navigation_use_semantic_object=l.navigation_use_semantic_object!==false;l.display_search_keywords=c||l.display_search_keywords||"";if(i){l.display_number_value=l.display_number_value||1234}l.form_factors=l.form_factors?l.form_factors:R.getDefaultFormFactors();l.desktopChecked=l.form_factors.manual.desktop;l.tabletChecked=l.form_factors.manual.tablet;l.phoneChecked=l.form_factors.manual.phone;l.manualFormFactor=!l.form_factors.appDefault&&l.editable;l.appFormFactor=l.form_factors.appDefault;l.formFactorConfigDefault=!!l.form_factors.defaultParam;if(l.signature){l.rows=R.getSignatureTableData(l.signature,n&&l.editable)}else{l.rows=l.mapping_signature&&l.mapping_signature!=="*=*"?R.getMappingSignatureTableData(l.mapping_signature,n&&l.editable):[R.getEmptyRowObj(l.editable)]}if(l.signature){l.isUnknownAllowed=l.signature.additional_parameters==="allowed"||l.signature.additionalParameters==="allowed"}else{l.isUnknownAllowed=l.mapping_signature!==undefined?R.getAllowUnknownParametersValue(l.mapping_signature):true}if(i){l.tile_actions_rows=R.getTileNavigationActionsRows(t,l.editable)}else if(!l.actions){l.actions=R.getTileNavigationActions(t)}if(i){var f=t.bag.getBag("deprecationProperties"),b=f.getProperty("deprecation"),y=null;if(b){y=r.getText(b==="D"?"configuration.app_deprecated":"configuration.app_archived",[f.getProperty("successor")])}l.deprecation_text=y}return l};R.getDataToDisplay=function(e,t){var a=0,i,n,r,s,l={display_icon_url:t.icon||e.display_icon_url||"",display_title_text:t.title||e.display_title_text||"",display_number_value:!isNaN(t.number)?t.number:"...",display_number_unit:t.numberUnit||e.display_number_unit||"",display_info_text:t.info||e.display_info_text||"",display_info_state:t.infoState||"Neutral",display_subtitle_text:t.subtitle||e.display_subtitle_text||"",display_state_arrow:t.stateArrow||"None",display_number_state:t.numberState||"None",display_number_digits:t.numberDigits>=0?t.numberDigits:4,display_number_factor:t.numberFactor||"",display_search_keyword:t.keywords||e.display_search_keyword||"",targetParams:[]};if(t.infoStatus){l.display_info_state=t.infoStatus}if(t.targetParams){l.targetParams.push(t.targetParams)}if(t.results){for(i=0,n=t.results.length;i<n;i=i+1){r=t.results[i].number||0;if(typeof r==="string"){r=parseFloat(r)}a=a+r;s=t.results[i].targetParams;if(s){l.targetParams.push(s)}}l.display_number_value=a}if(!isNaN(t.number)){if(typeof t.number==="string"){t.number=t.number.trim()}if(t.number===""){l.display_number_value="..."}else{var o=this._shouldProcessDigits(t.number,t.numberDigits),u=l.display_icon_url?4:5;if(t.number&&t.number.toString().length>=u||o){var p=this._normalizeNumber(t.number,u,t.numberFactor,t.numberDigits);l.display_number_factor=p.numberFactor;l.display_number_value=p.displayNumber}else{var c=x.getFloatInstance({maxFractionDigits:u});l.display_number_value=c.format(t.number)}}}if(l&&l.display_number_state){switch(l.display_number_state){case"Positive":l.display_number_state="Good";break;case"Negative":l.display_number_state="Error";break}}return l};R._normalizeNumber=function(e,t,a,i){var n;if(isNaN(e)){n=e}else{var r=x.getFloatInstance({maxFractionDigits:i});if(!a){var s=Math.abs(e);if(s>=1e9){a="B";e/=1e9}else if(s>=1e6){a="M";e/=1e6}else if(s>=1e3){a="K";e/=1e3}}n=r.format(e)}var l=n;var o=l[t-1];t-=o==="."||o===","?1:0;l=l.substring(0,t);return{displayNumber:l,numberFactor:a}};R._shouldProcessDigits=function(e,t){var a;e=typeof e!=="string"?e.toString():e;if(e.indexOf(".")!==-1){a=e.split(".")[1].length;if(a>t){return true}}return false};R.getTileSettingsAction=function(e,t,a){var i=R.getResourceBundleModel().getResourceBundle();var n=!a||a==="tile"?"tileSettingsBtn":"linkSettingsBtn";return{id:n,text:i.getText(n),press:function(){return new Promise(function(n){sap.ui.require(["sap/m/Button","sap/m/Dialog","sap/ui/core/mvc/View","sap/ui/layout/form/SimpleForm","sap/ui/layout/library"],function(r,s,o,u,p){var c=p.form.SimpleFormLayout;var g={showGroupSelection:false,title:e.getProperty("/config/display_title_text"),subtitle:e.getProperty("/config/display_subtitle_text")};if(!a||a==="tile"){g.info=e.getProperty("/config/display_info_text");g.icon=e.getProperty("/config/display_icon_url");g.keywords=e.getProperty("/config/display_search_keywords")}else if(a==="link"){g.showInfo=false;g.showIcon=false;g.showPreview=false}o.create({viewName:"module:sap/ushell/ui/footerbar/SaveAsTile.view"}).then(function(e){var o=new l(g);e.setModel(o);var p=new u({id:"tileSettings",layout:c.GridLayout,content:[e]}).addStyleClass("sapUshellAddBookmarkForm");var d=new r("bookmarkOkBtn",{text:i.getText("okBtn"),type:C.Emphasized,press:function(){t(e);b.close()},enabled:true});var _=new r("bookmarkCancelBtn",{text:i.getText("cancelBtn"),press:function(){b.close()}});var f=function(e){d.setEnabled(!!e.trim())};e.getTitleInput().attachLiveChange(function(){f(this.getValue())});var b=new s({id:"settingsDialog",title:!a||a==="tile"?i.getText("tileSettingsDialogTitle"):i.getText("linkSettingsDialogTitle"),contentWidth:"400px",content:p,beginButton:d,endButton:_,horizontalScrolling:false,afterClose:function(){b.destroy()}}).addStyleClass("sapContrastPlus");b.open();n(b)})})})}}};R.getSemanticNavigationUrl=function(e){var t="#"+String(e.navigation_semantic_object||"").trim();t+="-"+String(e.navigation_semantic_action||"").trim();if(e.navigation_semantic_parameters&&String(e.navigation_semantic_parameters||"").trim().length>0){t+="?"+String(e.navigation_semantic_parameters||"").trim()}return t};R.addParamsToUrl=function(e,t){var a="",i=e.indexOf("?")!==-1,n=t.targetParams,r;if(n&&n.length>0){for(r=0;r<n.length;r=r+1){a+=n[r];if(r<n.length-1){a+="&"}}}if(a.length>0){if(!i){e+="?"}else{e+="&"}e+=a}return e};return R},true);
//# sourceMappingURL=utils.js.map