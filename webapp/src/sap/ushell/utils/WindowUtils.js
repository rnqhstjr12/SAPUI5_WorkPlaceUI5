// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/Log","sap/ui/util/isCrossOriginURL","sap/ushell/utils","sap/base/util/UriParameters"],function(e,r,n,i){"use strict";var o={};o.hasInvalidProtocol=function(e){var r=document.createElement("a");r.setAttribute("href",e);if(r.protocol==="javascript:"){return true}return false};o.isCrossOriginUrl=function(e){return r(e)};o.openURL=function(r,n,i,o){var t=o===undefined?true:o;var a=this.isCrossOriginUrl(r);i=i||"";if(t&&this.hasInvalidProtocol(r)){e.fatal("Tried to open a URL with an invalid protocol",null,"sap/ushell/utils/WindowUtils");throw new Error("Tried to open a URL with an invalid protocol")}if(a){if(i.toLowerCase().indexOf("noopener")===-1){if(i!==""){i+=","}i+="noopener"}if(i.toLowerCase().indexOf("noreferrer")===-1){i+=",noreferrer"}window.open(r,n,i);return true}return window.open(r,n,i)};o.getLeanURL=function(r,n){var i=r||n;if(this.hasInvalidProtocol(i)){e.fatal("Tried to construct a lean URL for input containing an invalid protocol",null,"sap/ushell/utils/WindowUtils");return""}if((i||"").charAt(0)!=="#"){return i}var o=window.location.search;if(!o){o="?sap-ushell-config=lean"}else if(o.indexOf("sap-ushell-config=")>=-1){o+="&sap-ushell-config=lean"}return window.location.origin+window.location.pathname+o+i};o._getAdjustedQueryString=function(e,r){if((!e||e.length===0)&&(!r||r.length===0)){return null}var o=i.fromQuery(window.location.search);var t=Array.from(o.keys()).reduce(function(e,r){e[r]=o.getAll(r);return e},{});if(e&&e.length>0){e.forEach(function(e){var r=Object.keys(e)[0];if(r){t[r]=e[r]}})}if(r&&r.length>0){r.forEach(function(e){delete t[e]})}return n.urlParametersToString(t)};o.refreshBrowser=function(e,r){var i=n.getLocationHref();var t=n.getLocationSearch();var a=o._getAdjustedQueryString(e,r);if(a){i=i.replace(t,"?"+a)}if(n.getLocationHref()===i){n.windowLocationReload()}else{n.windowLocationAssign(i)}};return o});
//# sourceMappingURL=WindowUtils.js.map