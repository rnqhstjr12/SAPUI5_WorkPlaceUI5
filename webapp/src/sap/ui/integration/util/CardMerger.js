/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/merge","sap/ui/model/json/JSONModel","sap/base/util/deepClone","sap/ui/integration/util/Utils"],function(e,t,r,a){"use strict";var n={layers:{admin:0,content:5,translation:10,all:20},mergeManifestPathChanges:function(e,t){Object.keys(t).forEach(function(r){if(r.charAt(0)==="/"){var a=t[r];e.setProperty(r,a)}})},mergeTextsChanges:function(e,t,r){var i=a._language;if(t&&t.hasOwnProperty(i)){var s=t[i];for(var f in s){var o=s[f];if(typeof o==="object"){n.translateObject(e,f,o,r)}else{var l=e.getProperty(f);var c=true;if(l&&typeof l==="string"&&(l.indexOf("{context>")===0||l.indexOf("{{parameters")===0)){c=false}if(c){e.setProperty(f,o)}}}}},mergeCardDelta:function(r,i,s){var f=e({},r);if(typeof s==="undefined"){s="sap.card"}if(Array.isArray(i)&&i.length>0){var o,l,c;i.forEach(function(r){if(r.content){e(f[s],r.content)}else{var i=r.hasOwnProperty(":layer")?r[":layer"]:1e3;if(i===n.layers["translation"]){var u=a._language;var p={texts:{}};p.texts[u]={};delete r.texts;Object.keys(r).forEach(function(e){if(e.charAt(0)==="/"){p.texts[u][e]=r[e]}else{p[e]=r[e]}});r=p}l=e(l,r.texts);c=e(c,r[":designtime"]);o=o||new t(f);n.mergeManifestPathChanges(o,r)}});n.mergeTextsChanges(o,l,c)}return f},mergeCardDesigntimeMetadata:function(t,r){var a=e({},t);r.forEach(function(e){var t=e.content.entityPropertyChange||[];t.forEach(function(e){var t=e.propertyPath;switch(e.operation){case"UPDATE":if(a.hasOwnProperty(t)){a[t]=e.propertyValue}break;case"DELETE":delete a[t];break;case"INSERT":if(!a.hasOwnProperty(t)){a[t]=e.propertyValue}break;default:break}})});return a},translateObject:function(t,a,n,i){var s=t.getProperty(a);if(!s||typeof s!=="object"){return}s=r(s,500);if(!Array.isArray(s)){var f=(s._dt||{})._uuid;if(f&&n[f]){if(i&&i[a]&&i[a][f]){for(var o in i[a][f]){if(i[a][f][o].translatable===false){delete n[f][o]}}}e(s,n[f]);t.setProperty(a,s)}}else{s.forEach(function(t){var r=(t._dt||{})._uuid;if(r&&n[r]){if(i&&i[a]&&i[a][r]){for(var s in i[a][r]){if(i[a][r][s].translatable===false){delete n[r][s]}}}e(t,n[r])}});t.setProperty(a,s);return}}};return n});
//# sourceMappingURL=CardMerger.js.map