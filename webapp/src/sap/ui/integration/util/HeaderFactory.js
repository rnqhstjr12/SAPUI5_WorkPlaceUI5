/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./BaseFactory","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/core/Lib","sap/ui/integration/cards/actions/CardActions","sap/ui/integration/cards/actions/NavigationAction","sap/ui/integration/library","sap/m/library","sap/ui/integration/cards/NumericHeader","sap/ui/integration/cards/Header","sap/ui/integration/util/Utils","sap/m/Button"],function(t,e,a,i,r,s,n,o,c,u,p,d){"use strict";var l=n.CardActionArea;var f=n.CardActionType;var g=o.ButtonType;var y=n.CardDisplayVariant;var v=i.getResourceBundleFor("sap.ui.integration");var T=t.extend("sap.ui.integration.util.HeaderFactory");T.prototype.create=function(t,i){if(a(t)){e.warning("Card sap.card/header entry in the manifest is mandatory","sap.ui.integration.widgets.Card");return null}var s=this._oCard,n=s.getId()+"-header",o=s.getOpener(),d,f;t=this.createBindingInfos(t,s.getBindingNamespaces());if(o){i=this._createCloseButton(t)}switch(t.type){case"Numeric":f=new c(n,t,i,s._oIconFormatter);break;default:f=new u(n,t,i,s._oIconFormatter);break}f.setCard(s);if(t.status&&t.status.text&&t.status.text.format){d=p.getStatusTextBindingInfo(t.status.text.format,f);if(d){f.bindProperty("statusText",d)}}f.setServiceManager(s._oServiceManager);f.setDataProviderFactory(s._oDataProviderFactory);f._setDataConfiguration(t.data);if(s.isTileDisplayVariant()){this._setTileDefaults(f,t)}var g=new r({card:s});g.attach({area:l.Header,enabledPropertyName:"interactive",actions:t.actions,control:f});f._oActions=g;if(o){f.setProperty("focusable",false);f.setProperty("headingLevel","1")}return f};T.prototype._createCloseButton=function(t){var e=true;if(t.closeButton&&"visible"in t.closeButton){e=t.closeButton.visible}var a=new d({type:g.Transparent,tooltip:v.getText("CARD_DIALOG_CLOSE_BUTTON"),visible:e,icon:"sap-icon://decline",press:function(){this._oCard.hide()}.bind(this)});return a};T.prototype._setTileDefaults=function(t,e){t.setProperty("useTileLayout",true);t.setProperty("useTooltips",true);const a=this._oCard;const i=[y.TileFlat,y.TileFlatWide].indexOf(a.getDisplayVariant())>-1;if(!e.titleMaxLines){t.setTitleMaxLines(i?1:2)}if(i){t.setIconSize("XS");if(t.isA("sap.f.cards.NumericHeader")){t.setNumberSize("S")}if(!e.subtitleMaxLines){t.setSubtitleMaxLines(1)}}if(t.isA("sap.f.cards.NumericHeader")){t.getSideIndicators().forEach(t=>{t.setProperty("useTooltips",true)})}const r=e.actions&&e.actions[0];const n=r?.parameters?.url;const o=r?.parameters?.target;if(r?.type===f.Navigation&&n){t.applySettings({href:n,target:o||s.DEFAULT_TARGET,interactive:true})}};return T});
//# sourceMappingURL=HeaderFactory.js.map