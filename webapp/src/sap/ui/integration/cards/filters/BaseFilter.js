/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/Element","sap/ui/core/InvisibleText","sap/base/Log","sap/base/util/merge","sap/ui/core/Icon","sap/m/HBox","sap/m/Text","sap/ui/core/Lib","sap/ui/integration/model/ObservableModel","sap/ui/integration/util/LoadingProvider","sap/ui/integration/util/BindingHelper"],function(t,e,i,a,r,o,n,s,d,g,l,u){"use strict";var p=t.extend("sap.ui.integration.cards.filters.BaseFilter",{metadata:{abstract:true,library:"sap.ui.integration",properties:{key:{type:"string",defaultValue:""},config:{type:"object",defaultValue:"null"},value:{type:"object",defaultValue:null}},aggregations:{_loadingProvider:{type:"sap.ui.core.Element",multiple:false,visibility:"hidden"},_label:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"},_error:{type:"sap.m.HBox",multiple:false,visibility:"hidden"}},associations:{card:{type:"sap.ui.integration.widgets.Card",multiple:false}},events:{change:{parameters:{key:{type:"string"},value:{type:"string"}}}}},renderer:{apiVersion:2,render:function(t,e){const i=e.getAggregation("_error");t.openStart("div",e).class("sapFCardFilter");if(e.isLoading()){t.class("sapFCardFilterLoading")}t.openEnd();if(i){t.renderControl(i)}else{t.renderControl(e.getField())}t.close("div")}}});p.prototype.init=function(){this.setAggregation("_loadingProvider",new l);this.attachEventOnce("_dataReady",function(){this.fireEvent("_ready")})};p.prototype.exit=function(){if(this._oDataProvider){this._oDataProvider.destroy();this._oDataProvider=null}};p.prototype.isLoading=function(){var t=this.getAggregation("_loadingProvider");return t.getLoading()};p.prototype.getField=function(){return null};p.prototype.createLabel=function(t){if(t.label){this.setAggregation("_label",new i({text:t.label}).toStatic());return this.getAggregation("_label")}return null};p.prototype.showLoadingPlaceholders=function(){if(!this._isDataProviderJson()){this.getAggregation("_loadingProvider").setLoading(true)}};p.prototype.hideLoadingPlaceholders=function(){this.getAggregation("_loadingProvider").setLoading(false)};p.prototype.onDataChanged=function(){};p.prototype.setValueFromOutside=function(t){};p.prototype.getValueForModel=function(){};p.prototype.refreshData=function(){if(this._oDataProvider){this._oDataProvider.triggerDataUpdate()}};p.prototype.getCardInstance=function(){return e.getElementById(this.getCard())};p.prototype.getParsedConfiguration=function(){var t=r({},this.getConfig()),e=t.data;delete t.data;t=u.createBindingInfos(t,this.getCardInstance().getBindingNamespaces());if(e){t.data=e}return t};p.prototype._showError=function(){var t=d.getResourceBundleFor("sap.ui.integration").getText("CARD_FILTER_DATA_LOAD_ERROR");this.destroyAggregation("_error");this.setAggregation("_error",new n({justifyContent:"Center",alignItems:"Center",items:[new o({src:"sap-icon://message-error",size:"1rem"}).addStyleClass("sapUiTinyMargin"),new s({text:t})]}))};p.prototype._handleError=function(t){a.error(t);this._showError()};p.prototype._onDataRequestComplete=function(){this.fireEvent("_dataReady");this.hideLoadingPlaceholders()};p.prototype._setDataConfiguration=function(t){var e=this.getCardInstance(),i;if(!t){this.fireEvent("_dataReady");return}if(this._oDataProvider){this._oDataProvider.destroy()}this._oDataProvider=e.getDataProviderFactory().create(t,null,true);if(t.name){i=e.getModel(t.name)}else if(this._oDataProvider){i=new g;i.setSizeLimit(e.getModelSizeLimit());this.setModel(i)}if(!i){this.fireEvent("_dataReady");return}i.attachEvent("change",function(){this.onDataChanged()}.bind(this));if(this._oDataProvider){this._oDataProvider.attachDataRequested(function(){this.showLoadingPlaceholders()}.bind(this));this._oDataProvider.attachDataChanged(function(t){i.setData(t.getParameter("data"));this._onDataRequestComplete()}.bind(this));this._oDataProvider.attachError(function(t){this._handleError(t.getParameter("message"));this._onDataRequestComplete()}.bind(this));this._oDataProvider.triggerDataUpdate()}else{this.fireEvent("_dataReady")}};p.prototype._syncValue=function(){const t=this.getValueForModel();this.setValue(t);this.fireChange({key:this.getKey(),value:t.value})};p.prototype._isDataProviderJson=function(){return this._oDataProvider&&this._oDataProvider.getSettings()&&this._oDataProvider.getSettings()["json"]};return p});
//# sourceMappingURL=BaseFilter.js.map