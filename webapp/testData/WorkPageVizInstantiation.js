// Copyright (c) 2009-2023 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/VisualizationInstantiation","sap/base/util/ObjectPath","sap/base/Log","sap/base/util/deepExtend","sap/base/util/deepClone","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/services/_CommonDataModel/vizTypeDefaults/VizTypeDefaults","sap/ushell/utils/tilecard/TileCard","sap/ushell/Config"],function(t,e,a,i,s,n,r,o,p,d,l){"use strict";class c{static#t;#e;#a;static async getInstance(){if(!c.#t){const e=new t;const a=await p.getAll();c.#t=new c(e,a)}return c.#t}constructor(t,e){this.#e=t;this.#a=e}_getVizInstantiationData(t){const a=s(e.get(["descriptor","value","sap.flp","indicatorDataSource"],t));const i=this.#a[t.type];const n=l.last("/core/contentProviders/providerInfo/enabled");const r=n&&l.last("/core/contentProviders/providerInfo/showContentProviderInfoOnVisualizations");return{id:t.id,title:e.get(["descriptor","value","sap.app","title"],t),subtitle:e.get(["descriptor","value","sap.app","subTitle"],t),info:e.get(["descriptor","value","sap.app","info"],t),icon:e.get(["descriptor","value","sap.ui","icons","icon"],t),keywords:e.get(["descriptor","value","sap.app","tags","keywords"],t)||[],_instantiationData:{platform:"CDM",vizType:i},indicatorDataSource:a,vizType:e.get("type",t),dataSource:e.get(["_siteData","dataSource"],t),contentProviderId:e.get(["_siteData","contentProviderId"],t),contentProviderLabel:e.get(["_siteData","contentProviderLabel"],t),displayProviderLabel:r,target:e.get(["_siteData","target"],t),targetURL:e.get(["_siteData","targetURL"],t),vizConfig:e.get(["descriptor","value"],t),supportedDisplayFormats:e.get(["descriptor","value","sap.flp","vizOptions","displayFormats","supported"],t),displayFormatHint:e.get(["descriptor","value","sap.flp","vizOptions","displayFormats","default"],t)||"standard",numberUnit:e.get(["descriptor","value","sap.flp","numberUnit"],t),vizId:t.id,preview:t.preview}}createVizInstance(t){var e=this.#e.instantiateVisualization(this._getVizInstantiationData(t));if(e){e.setActive(true)}return e}createTileCardConfiguration(t){return d.createTileCardConfiguration(this._getVizInstantiationData(t))}}return c},true);
//# sourceMappingURL=WorkPageVizInstantiation.js.map